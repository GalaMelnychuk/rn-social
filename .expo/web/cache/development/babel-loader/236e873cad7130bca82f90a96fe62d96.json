{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/galocka/rn-social/src/screens/tab/HomeScreen.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { styles } from \"../../../Styles\";\nimport { auth, firestore } from \"../../../firebase/config\";\nexport default function HomeScreen() {\n  var dispatch = useDispatch();\n  var id = useSelector(function (state) {\n    return state.user.userId;\n  });\n  useEffect(function () {\n    currentUser();\n  }, []);\n  useEffect(function () {\n    getUserPosts();\n  }, [id]);\n\n  var currentUser = function currentUser() {\n    var currentUser, getUserPosts;\n    return _regeneratorRuntime.async(function currentUser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(auth.currentUser);\n\n          case 2:\n            currentUser = _context2.sent;\n\n            getUserPosts = function getUserPosts() {\n              var dataPosts, allUserPosts;\n              return _regeneratorRuntime.async(function getUserPosts$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return _regeneratorRuntime.awrap(firestore.collection(\"posts\").where(\"userId\", \"==\", id).get());\n\n                    case 2:\n                      dataPosts = _context.sent;\n                      allUserPosts = dataPosts.docs.map(function (doc) {\n                        return doc.data();\n                      });\n                      console.log(\"allPosts\", allUserPosts);\n\n                    case 5:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            };\n\n            dispatch({\n              type: \"CURRENT_USER\",\n              payload: {\n                userName: currentUser.displayName,\n                userId: currentUser.uid,\n                userPosts: currentUser.allUserPosts\n              }\n            });\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signOut = function signOut() {\n    return _regeneratorRuntime.async(function signOut$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(auth.signOut());\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getAllPosts = function getAllPosts() {\n    var dataPosts, allPosts;\n    return _regeneratorRuntime.async(function getAllPosts$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(firestore.collection(\"posts\").where(\"userId\", \"==\", id).get());\n\n          case 2:\n            dataPosts = _context4.sent;\n            allPosts = dataPosts.docs.map(function (doc) {\n              return doc.data();\n            });\n            console.log(\"allPosts\", allPosts);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.text,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Hello, my old friend ;)! What kind of news are you intrested in now?\"), React.createElement(TouchableOpacity, {\n    style: {\n      marginTop: 100,\n      borderColor: \"green\",\n      borderWidth: 1,\n      padding: 10,\n      borderRadius: 10\n    },\n    onPress: signOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"SignOut\"))));\n}\nvar stylesText = StyleSheet.create({\n  tex: {\n    color: \"blue\",\n    fontSize: 70,\n    marginBottom: 20,\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/galocka/rn-social/src/screens/tab/HomeScreen.js"],"names":["React","useState","useEffect","useDispatch","useSelector","styles","auth","firestore","HomeScreen","dispatch","id","state","user","userId","currentUser","getUserPosts","collection","where","get","dataPosts","allUserPosts","docs","map","doc","data","console","log","type","payload","userName","displayName","uid","userPosts","signOut","getAllPosts","allPosts","container","text","marginTop","borderColor","borderWidth","padding","borderRadius","stylesText","StyleSheet","create","tex","color","fontSize","marginBottom","alignItems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Alert,\n  TouchableOpacity,\n  Keyboard,\n  Text,\n  View,\n  StyleSheet,\n  TextInput,\n} from \"react-native\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { styles } from \"../../../Styles\";\nimport { auth, firestore } from \"../../../firebase/config\";\n\nexport default function HomeScreen() {\n  const dispatch = useDispatch();\n  const id = useSelector((state) => state.user.userId);\n\n  useEffect(() => {\n    currentUser();\n  }, []);\n\n  useEffect(() => {\n    getUserPosts();\n  }, [id]);\n\n  // взять информацию (ид-юзера, и т.д.) текущего юзера\n  const currentUser = async () => {\n    const currentUser = await auth.currentUser;\n\n    const getUserPosts = async () => {\n      const dataPosts = await firestore\n        .collection(\"posts\")\n        .where(\"userId\", \"==\", id)\n        .get();\n      const allUserPosts = dataPosts.docs.map((doc) => doc.data());\n      console.log(\"allPosts\", allUserPosts);\n    };\n\n    dispatch({\n      type: \"CURRENT_USER\",\n      payload: { userName: currentUser.displayName, userId: currentUser.uid, userPosts: currentUser.allUserPosts },\n    });\n    // console.log(\"currentUser in Home Screen\", currentUser);\n    // console.log(\"userId\", id);\n  };\n\n  const signOut = async () => {\n    await auth.signOut();\n    // dispatch({ type: \"USER_SIGNOUT\" });\n  };\n\n  const getAllPosts = async () => {\n    const dataPosts = await firestore\n      .collection(\"posts\")\n      .where(\"userId\", \"==\", id)\n      .get();\n    const allPosts = dataPosts.docs.map((doc) => doc.data());\n    console.log(\"allPosts\", allPosts);\n  };\n\n  return (\n    <>\n      <View style={styles.container}>\n        <Text style={styles.text}>\n          Hello, my old friend ;)! What kind of news are you intrested in now?\n        </Text>\n        <TouchableOpacity\n          style={{\n            marginTop: 100,\n            borderColor: \"green\",\n            borderWidth: 1,\n            padding: 10,\n            borderRadius: 10,\n          }}\n          onPress={signOut}\n        >\n          <Text>SignOut</Text>\n        </TouchableOpacity>\n      </View>\n    </>\n  );\n}\n\nconst stylesText = StyleSheet.create({\n  tex: {\n    color: \"blue\",\n    fontSize: 70,\n    marginBottom: 20,\n    // marginHorizontal: 80,\n    alignItems: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}